language: ruby

rvm:
  - 2.6.1
 
services:
  - sqlite

build:
#   pre_ci_boot:
#       image_name: drydock/u14ruball
#       image_tag: latest
#       pull: true
#       env: FOO=bar
#       options: "-e HOME=/root"

  ci:
#     - cp config/database.shippable.yml config/database.yml
#     - gem uninstall bundler -v 2.0.1
#     - gem install bundler -v 1.3.0
    - bundle install
    # - rails db:setup
    - rails db:migrate
    - rspec

integrations:                               
  notifications:
    - integrationName: email
      type: email
      on_success: never
      on_failure: never
      on_cancel: never
      on_pull_request: never      

    - integrationName: slackme   
      type: slack
      recipients:
        - "#docker-rails"
      on_success: always
      on_failure: always
      on_cancel: always
      on_start: always
      on_pull_request: always
